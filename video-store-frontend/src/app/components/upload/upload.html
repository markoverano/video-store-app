<div class="upload-container">
  <h1>Upload Video</h1>

  <div class="message success" *ngIf="successMessage">{{ successMessage }}</div>
  <div class="message error" *ngIf="errorMessage">{{ errorMessage }}</div>

  <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="title">Title *</label>
      <input type="text" id="title" formControlName="title" placeholder="Enter title">
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" rows="3" placeholder="Enter description"></textarea>
    </div>

    <div class="form-group">
      <label>Categories</label>
      <div class="categories">
        <label *ngFor="let cat of categories" class="category-item">
          <input
            type="checkbox"
            [checked]="selectedCategoryIds.includes(cat.id)"
            (change)="toggleCategory(cat.id)">
          {{ cat.name }}
        </label>
        <span *ngIf="categories.length === 0">No categories available</span>
      </div>
    </div>

    <div class="form-group">
      <label for="file">Video File * (MP4, AVI, MOV - Max 100MB)</label>
      <input type="file" id="file" accept=".mp4,.avi,.mov" (change)="onFileChange($event)">
      <div class="file-error" *ngIf="fileError">{{ fileError }}</div>
      <div class="file-selected" *ngIf="selectedFile">Selected: {{ selectedFile.name }}</div>
    </div>

    <div class="progress" *ngIf="isUploading">
      <div class="progress-bar" [style.width.%]="uploadProgress"></div>
      <span>{{ uploadProgress }}%</span>
    </div>

    <div class="actions">
      <button type="button" routerLink="/">Cancel</button>
      <button type="submit" [disabled]="isUploading" class="btn-primary">
        {{ isUploading ? 'Uploading...' : 'Upload' }}
      </button>
    </div>
  </form>
</div>
